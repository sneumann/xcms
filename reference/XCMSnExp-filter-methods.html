<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>XCMSnExp filtering and subsetting — filterFeatureDefinitions • xcms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="XCMSnExp filtering and subsetting — filterFeatureDefinitions" />
<meta property="og:description" content="filterFeatureDefinitions allows to subset the feature definitions of
an XCMSnExp object. Which feature definitions should be kept can be
specified with the features argument that can be a logical,
integer or character vector. The function returns the
XCMSnExp with the reduced featureDefinitions data frame.
The [ method allows to subset a XCMSnExp
object by spectra. Be aware that the [ method removes all
preprocessing results, except adjusted retention times if
keepAdjustedRtime = TRUE is passed to the method.
[[ extracts a single Spectrum
object from an XCMSnExp. The reported retention time is the
adjusted retention time if alignment has been performed on x.
filterMsLevel: reduces the XCMSnExp
object to spectra of the specified MS level(s). Chromatographic peaks
and identified features are also subsetted to the respective MS level. See
filterMsLevel documentation for details and
examples.
The methods listed on this page allow to filter and subset
XCMSnExp objects. Most of them are inherited from the
OnDiskMSnExp object and have been adapted for
XCMSnExp to enable subsetting also on the preprocessing
results.
filterFile: allows to reduce the
XCMSnExp to data from only certain files. Identified
chromatographic peaks for these files are retained while all eventually
present features (peak grouping information) are dropped. By default
also adjusted retention times are removed (if present). This can be
overwritten by setting keepAdjustedRtime = TRUE.
filterMz: filters the data set based on the
provided mz value range. All chromatographic peaks and features (grouped
peaks) falling completely within the provided mz value range are retained
(if their minimal mz value is &amp;gt;= mz[1] and the maximal mz value
&amp;lt;= mz[2]. Adjusted retention times, if present, are not altered by
the filtering.
filterRt: filters the data set based on the
provided retention time range. All chromatographic peaks and features
(grouped peaks) the specified retention time window are retained (i.e. if
the retention time corresponding to the peak's apex is within the
specified rt range). If retention time correction has been performed,
the method will by default filter the object by adjusted retention times.
The argument adjusted allows to specify manually whether filtering
should be performed by raw or adjusted retention times. Filtering by
retention time does not drop any preprocessing results nor does it remove
or change alignment results (i.e. adjusted retention times).
The method returns an empty object if no spectrum or feature is within
the specified retention time range.
split splits an XCMSnExp object into a list
of XCMSnExp objects based on the provided parameter f.
Note that by default all pre-processing results are removed by the
splitting, except adjusted retention times, if the optional argument
keepAdjustedRtime = TRUE is provided." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xcms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.11.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/xcms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/new_functionality.html">New and modified functionality in xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-direct-injection.html">Grouping FTICR-MS data with xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-lcms-ms.html">LC-MS/MS data analysis with xcms</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sneumann/xcms/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>XCMSnExp filtering and subsetting</h1>
    <small class="dont-index">Source: <a href='https://github.com/sneumann/xcms/blob/master/R/functions-XCMSnExp.R'><code>R/functions-XCMSnExp.R</code></a>, <a href='https://github.com/sneumann/xcms/blob/master/R/methods-XCMSnExp.R'><code>R/methods-XCMSnExp.R</code></a></small>
    <div class="hidden name"><code>XCMSnExp-filter-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>filterFeatureDefinitions</code> allows to subset the feature definitions of
an <code>XCMSnExp</code> object. Which feature definitions should be kept can be
specified with the <code>features</code> argument that can be a <code>logical</code>,
<code>integer</code> or <code>character</code> vector. The function returns the
<code>XCMSnExp</code> with the reduced <code>featureDefinitions</code> data frame.</p>
<p>The <code>[</code> method allows to subset a <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code>
object by spectra. Be aware that the <code>[</code> method removes all
preprocessing results, except adjusted retention times if
<code>keepAdjustedRtime = TRUE</code> is passed to the method.</p>
<p><code>[[</code> extracts a single <code>Spectrum</code>
object from an <code>XCMSnExp</code>. The reported retention time is the
adjusted retention time if alignment has been performed on <code>x</code>.</p>
<p><code>filterMsLevel</code>: reduces the <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code>
object to spectra of the specified MS level(s). Chromatographic peaks
and identified features are also subsetted to the respective MS level. See
<code>filterMsLevel</code> documentation for details and
examples.</p>
<p>The methods listed on this page allow to filter and subset
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> objects. Most of them are inherited from the
<code>OnDiskMSnExp</code> object and have been adapted for
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> to enable subsetting also on the preprocessing
results.</p>
<p><code>filterFile</code>: allows to reduce the
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> to data from only certain files. Identified
chromatographic peaks for these files are retained while all eventually
present features (peak grouping information) are dropped. By default
also adjusted retention times are removed (if present). This can be
overwritten by setting <code>keepAdjustedRtime = TRUE</code>.</p>
<p><code>filterMz</code>: filters the data set based on the
provided mz value range. All chromatographic peaks and features (grouped
peaks) falling completely within the provided mz value range are retained
(if their minimal mz value is <code>&gt;= mz[1]</code> and the maximal mz value
<code>&lt;= mz[2]</code>. Adjusted retention times, if present, are not altered by
the filtering.</p>
<p><code>filterRt</code>: filters the data set based on the
provided retention time range. All chromatographic peaks and features
(grouped peaks) the specified retention time window are retained (i.e. if
the retention time corresponding to the peak's apex is within the
specified rt range). If retention time correction has been performed,
the method will by default filter the object by adjusted retention times.
The argument <code>adjusted</code> allows to specify manually whether filtering
should be performed by raw or adjusted retention times. Filtering by
retention time does not drop any preprocessing results nor does it remove
or change alignment results (i.e. adjusted retention times).
The method returns an empty object if no spectrum or feature is within
the specified retention time range.</p>
<p><code>split</code> splits an <code>XCMSnExp</code> object into a <code>list</code>
of <code>XCMSnExp</code> objects based on the provided parameter <code>f</code>.
Note that by default all pre-processing results are removed by the
splitting, except adjusted retention times, if the optional argument
<code>keepAdjustedRtime = TRUE</code> is provided.</p>
    </div>

    <pre class="usage">filterFeatureDefinitions(x, features)

# S4 method for XCMSnExp,ANY,ANY,ANY
[(x, i, j, ..., drop = TRUE)

# S4 method for XCMSnExp,ANY,ANY
[[(x, i, j, drop = FALSE)

# S4 method for XCMSnExp
filterMsLevel(object, msLevel., keepAdjustedRtime = hasAdjustedRtime(object))

# S4 method for XCMSnExp
filterFile(object, file, keepAdjustedRtime = FALSE)

# S4 method for XCMSnExp
filterMz(object, mz, msLevel., ...)

# S4 method for XCMSnExp
filterRt(object, rt, msLevel., adjusted = hasAdjustedRtime(object))

# S4 method for XCMSnExp,ANY
split(x, f, drop = FALSE, ...)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>For <code>[</code> and <code>[[</code>: an <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p></td>
    </tr>
    <tr>
      <th>features</th>
      <td><p>For <code>filterFeatureDefinitions</code>: either a <code>integer</code>
specifying the indices of the features (rows) to keep, a <code>logical</code>
with a length matching the number of rows of <code>featureDefinitions</code>
or a <code>character</code> with the feature (row) names.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>For <code>[</code>: <code>numeric</code> or <code>logical</code> vector specifying to
which spectra the data set should be reduced.
For <code>[[</code>: a single integer or character.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>For <code>[</code> and <code>[[</code>: not supported.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional additional arguments.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>For <code>[</code> and <code>[[</code>: not supported.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>A <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p></td>
    </tr>
    <tr>
      <th>msLevel.</th>
      <td><p>For <code>filterMz</code>, <code>filterRt</code>, <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code>
defining the MS level(s) to which operations should be applied or to
which the object should be subsetted. See <code>filterMz</code>
for more details</p></td>
    </tr>
    <tr>
      <th>keepAdjustedRtime</th>
      <td><p>For <code>filterFile</code>, <code>filterMsLevel</code>,
<code>[</code> <code>split</code>: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> defining whether the adjusted
retention times should be kept, even if e.g. features are being removed
(and the retention time correction was performed on these features).</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p>For <code>filterFile</code>: <code>integer</code> defining the file index
within the object to subset the object by file or <code>character</code>
specifying the file names to sub set. The indices are expected to be
increasingly ordered, if not they are ordered internally.</p></td>
    </tr>
    <tr>
      <th>mz</th>
      <td><p>For <code>filterMz</code>: <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(2)</a></code> defining the lower and upper
mz value for the filtering.</p></td>
    </tr>
    <tr>
      <th>rt</th>
      <td><p>For <code>filterRt</code>: <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(2)</a></code> defining the retention time
window (lower and upper bound) for the filtering.</p></td>
    </tr>
    <tr>
      <th>adjusted</th>
      <td><p>For <code>filterRt</code>: <code>logical</code> indicating whether the
object should be filtered by original (<code>adjusted = FALSE</code>) or
adjusted retention times (<code>adjusted = TRUE</code>).
For <code>spectra</code>: whether the retention times in the individual
<code>Spectrum</code> objects should be the adjusted or raw retention times.</p></td>
    </tr>
    <tr>
      <th>f</th>
      <td><p>For <code>split</code> a vector of length equal to the length of x
defining how <code>x</code> will be splitted. It is converted internally to
a <code>factor</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>All methods return an <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All subsetting methods try to ensure that the returned data is
consistent. Correspondence results for example are removed if the data
set is sub-setted by file, since the correspondence results are dependent
on the files on which correspondence was performed. Thus, some filter
and sub-setting methods drop some of the preprocessing results. An
exception are the adjusted retention times: most subsetting methods
support the argument <code>keepAdjustedRtime</code> (even the <code>[</code> method)
that forces the adjusted retention times to be retained even if the
default would be to drop them.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The <code>filterFile</code> method removes also process history steps not
related to the files to which the object should be sub-setted and updates
the <code>fileIndex</code> attribute accordingly. Also, the method does not
allow arbitrary ordering of the files or re-ordering of the files within
the object.</p>
<p>Note also that most of the filtering methods, and also the subsetting
operations <code>[</code> drop all or selected preprocessing results. To
consolidate the alignment results, i.e. ensure that adjusted retention
times are always preserved, use the <code><a href='applyAdjustedRtime.html'>applyAdjustedRtime</a></code>
function on the object that contains the alignment results. This replaces
the raw retention times with the adjusted ones.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> for base class documentation.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Load some of the files from the faahKO package.</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>faahKO</span>)
<span class='no'>fs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>'cdf/KO/ko15.CDF'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"faahKO"</span>),
        <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>'cdf/KO/ko16.CDF'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"faahKO"</span>),
        <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>'cdf/KO/ko18.CDF'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"faahKO"</span>))
<span class='co'>## Read the files</span>
<span class='no'>od</span> <span class='kw'>&lt;-</span> <span class='fu'>readMSData</span>(<span class='no'>fs</span>, <span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"onDisk"</span>)</div><div class='output co'>#&gt; <span class='message'>Polarity can not be extracted from netCDF files, please set manually the polarity with the 'polarity' method.</span></div><div class='input'>
<span class='co'>## Perform peak detection on them using the matched filter algorithm. Note</span>
<span class='co'>## that we use a large value for binSize to reduce the runtime of the</span>
<span class='co'>## example code.</span>
<span class='no'>mfp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='findChromPeaks-matchedFilter.html'>MatchedFilterParam</a></span>(<span class='kw'>binSize</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='no'>xod</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='chromatographic-peak-detection.html'>findChromPeaks</a></span>(<span class='no'>od</span>, <span class='kw'>param</span> <span class='kw'>=</span> <span class='no'>mfp</span>)

<span class='co'>## Subset the dataset to the first and third file.</span>
<span class='no'>xod_sub</span> <span class='kw'>&lt;-</span> <span class='fu'>filterFile</span>(<span class='no'>xod</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>3</span>))

<span class='co'>## The number of chromatographic peaks per file for the full object</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod</span>)[, <span class='st'>"sample"</span>])</div><div class='output co'>#&gt; 
#&gt;   1   2   3 
#&gt; 150 167 144 </div><div class='input'>
<span class='co'>## The number of chromatographic peaks per file for the subset</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>)[, <span class='st'>"sample"</span>])</div><div class='output co'>#&gt; 
#&gt;   1   2 
#&gt; 150 144 </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='fu'>fileNames</span>(<span class='no'>xod</span>))</div><div class='output co'>#&gt; [1] "ko15.CDF" "ko16.CDF" "ko18.CDF"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='fu'>fileNames</span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt; [1] "ko15.CDF" "ko18.CDF"</div><div class='input'>
<span class='co'>## Filter on mz values; chromatographic peaks and features within the</span>
<span class='co'>## mz range are retained (as well as adjusted retention times).</span>
<span class='no'>xod_sub</span> <span class='kw'>&lt;-</span> <span class='fu'>filterMz</span>(<span class='no'>xod</span>, <span class='kw'>mz</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>300</span>, <span class='fl'>400</span>))
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt;             mz mzmin mzmax       rt    rtmin    rtmax    into    intf   maxo
#&gt; CP025 300.1987 300.1 300.2 3379.317 3365.232 3394.966 4534354 9752747 218112
#&gt; CP026 301.0000 301.0 301.0 2786.200 2772.115 2801.849 2739847 4867115 118512
#&gt; CP027 300.1987 300.1 300.2 3379.317 3365.232 3394.966 4534354 9801902 218112
#&gt; CP028 301.0000 301.0 301.0 2786.200 2772.115 2801.849 2739847 4867445 118512
#&gt; CP029 304.1000 304.1 304.1 2923.916 2909.831 2938.000 1948206 3741626  94576
#&gt; CP030 304.1000 304.1 304.1 2923.916 2909.831 2938.000 1948206 3741620  94576
#&gt;           maxf i       sn sample
#&gt; CP025 520673.1 1 68.82424      1
#&gt; CP026 258437.5 2 34.16110      1
#&gt; CP027 523174.6 1 52.33995      1
#&gt; CP028 258439.1 2 25.85502      1
#&gt; CP029 202567.6 3 20.26547      1
#&gt; CP030 202567.6 1 37.08975      1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 129</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod</span>))</div><div class='output co'>#&gt; [1] 461</div><div class='input'>
<span class='co'>## Filter on rt values. All chromatographic peaks and features within the</span>
<span class='co'>## retention time range are retained. Filtering is performed by default on</span>
<span class='co'>## adjusted retention times, if present.</span>
<span class='no'>xod_sub</span> <span class='kw'>&lt;-</span> <span class='fu'>filterRt</span>(<span class='no'>xod</span>, <span class='kw'>rt</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2700</span>, <span class='fl'>2900</span>))

<span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span>(<span class='fu'>rtime</span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 2700.127 2898.877</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt;             mz mzmin mzmax       rt    rtmin    rtmax      into      intf  maxo
#&gt; CP001 205.0000 205.0 205.0 2784.635 2770.550 2800.284 1778568.9 3580019.5 84280
#&gt; CP002 207.0839 207.0 207.1 2711.082 2698.562 2723.601  358347.2  630725.0 18800
#&gt; CP003 205.0000 205.0 205.0 2784.635 2770.550 2800.284 1778568.9 3577971.3 84280
#&gt; CP004 207.0839 207.0 207.1 2711.082 2698.562 2723.601  358347.2  614916.6 18800
#&gt; CP007 244.1000 244.1 244.1 2828.453 2814.369 2842.538  598990.3 1145077.8 31312
#&gt; CP009 244.1000 244.1 244.1 2828.453 2814.369 2842.538  598990.3 1221678.7 31312
#&gt;            maxf i       sn sample
#&gt; CP001 194233.12 1 63.28090      1
#&gt; CP002  37449.32 2 12.20094      1
#&gt; CP003 194213.46 1 66.00099      1
#&gt; CP004  36745.31 2 12.48743      1
#&gt; CP007  64181.64 2 16.99513      1
#&gt; CP009  67743.45 2 23.92659      1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>)[, <span class='st'>"rt"</span>])</div><div class='output co'>#&gt; [1] 2711.082 2895.746</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod</span>))</div><div class='output co'>#&gt; [1] 461</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='no'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 47</div><div class='input'>
<span class='co'>## Extract a single Spectrum</span>
<span class='no'>xod</span><span class='kw'>[[</span><span class='fl'>4</span>]]</div><div class='output co'>#&gt; Object of class "Spectrum1"
#&gt;  Retention time: 41:46 
#&gt;  MSn level: 1 
#&gt;  Total ion count: 427 
#&gt;  Polarity: NA </div><div class='input'>
<span class='co'>## Subsetting using [ removes all preprocessing results - using</span>
<span class='co'>## keepAdjustedRtime = TRUE would keep adjusted retention times, if present.</span>
<span class='no'>xod_sub</span> <span class='kw'>&lt;-</span> <span class='no'>xod</span>[<span class='fu'>fromFile</span>(<span class='no'>xod</span>) <span class='kw'>==</span> <span class='fl'>1</span>]</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed preprocessing results</span></div><div class='input'><span class='no'>xod_sub</span></div><div class='output co'>#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Thu Apr 30 09:39:27 2020] 
#&gt;  MSnbase version: 2.14.0 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko15.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko15.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F1.S0001 F1.S0002 ... F1.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -</div><div class='input'>
<span class='co'>## Using split does also remove preprocessing results, but it supports the</span>
<span class='co'>## optional parameter keepAdjustedRtime.</span>
<span class='co'>## Split the object into a list of XCMSnExp objects, one per file</span>
<span class='no'>xod_list</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span>(<span class='no'>xod</span>, <span class='kw'>f</span> <span class='kw'>=</span> <span class='fu'>fromFile</span>(<span class='no'>xod</span>))
<span class='no'>xod_list</span></div><div class='output co'>#&gt; $`1`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Thu Apr 30 09:39:27 2020] 
#&gt;  MSnbase version: 2.14.0 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko15.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko15.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F1.S0001 F1.S0002 ... F1.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; 
#&gt; $`2`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Thu Apr 30 09:39:27 2020] 
#&gt;  MSnbase version: 2.14.0 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko16.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko16.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F2.S0001 F2.S0002 ... F2.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; 
#&gt; $`3`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Thu Apr 30 09:39:27 2020] 
#&gt;  MSnbase version: 2.14.0 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko18.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko18.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F3.S0001 F3.S0002 ... F3.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffen Neumann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


