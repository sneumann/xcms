<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>XCMSnExp filtering and subsetting — filterFeatureDefinitions • xcms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="XCMSnExp filtering and subsetting — filterFeatureDefinitions" />
<meta property="og:description" content="filterFeatureDefinitions allows to subset the feature definitions of
an XCMSnExp object. Which feature definitions should be kept can be
specified with the features argument that can be a logical,
integer or character vector. The function returns the
XCMSnExp with the reduced featureDefinitions data frame.
The [ method allows to subset a XCMSnExp
object by spectra. Be aware that the [ method removes all
preprocessing results, except adjusted retention times if
keepAdjustedRtime = TRUE is passed to the method.
[[ extracts a single Spectrum
object from an XCMSnExp. The reported retention time is the
adjusted retention time if alignment has been performed on x.
filterMsLevel: reduces the XCMSnExp
object to spectra of the specified MS level(s). Chromatographic peaks
and identified features are also subsetted to the respective MS level. See
filterMsLevel documentation for details and
examples.
The methods listed on this page allow to filter and subset
XCMSnExp objects. Most of them are inherited from the
OnDiskMSnExp object and have been adapted for
XCMSnExp to enable subsetting also on the preprocessing
results.
filterFile: allows to reduce the
XCMSnExp to data from only certain files. Identified
chromatographic peaks for these files are retained while correspondence
results (feature definitions) are removed by default. To force keeping
feature definitions use keepFeatures = TRUE. Adjusted retention times
are kept by default if present. Use keepAdjustedRtime = FALSE to
remove them.
filterMz: filters the data set based on the
provided mz value range. All chromatographic peaks and features (grouped
peaks) falling completely within the provided mz value range are retained
(if their minimal mz value is &amp;gt;= mz[1] and the maximal mz value
&amp;lt;= mz[2]. Adjusted retention times, if present, are not altered by
the filtering.
filterRt: filters the data set based on the
provided retention time range. All chromatographic peaks and features
(grouped peaks) the specified retention time window are retained (i.e. if
the retention time corresponding to the peak's apex is within the
specified rt range). If retention time correction has been performed,
the method will by default filter the object by adjusted retention times.
The argument adjusted allows to specify manually whether filtering
should be performed by raw or adjusted retention times. Filtering by
retention time does not drop any preprocessing results nor does it remove
or change alignment results (i.e. adjusted retention times).
The method returns an empty object if no spectrum or feature is within
the specified retention time range.
split splits an XCMSnExp object into a list
of XCMSnExp objects based on the provided parameter f.
Note that by default all pre-processing results are removed by the
splitting, except adjusted retention times, if the optional argument
keepAdjustedRtime = TRUE is provided." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xcms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.11.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/xcms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/xcms-direct-injection.html">Grouping FTICR-MS data with xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-lcms-ms.html">LC-MS/MS data analysis with xcms</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sneumann/xcms/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>XCMSnExp filtering and subsetting</h1>
    <small class="dont-index">Source: <a href='https://github.com/sneumann/xcms/blob/master/R/functions-XCMSnExp.R'><code>R/functions-XCMSnExp.R</code></a>, <a href='https://github.com/sneumann/xcms/blob/master/R/methods-XCMSnExp.R'><code>R/methods-XCMSnExp.R</code></a></small>
    <div class="hidden name"><code>XCMSnExp-filter-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>filterFeatureDefinitions</code> allows to subset the feature definitions of
an <code>XCMSnExp</code> object. Which feature definitions should be kept can be
specified with the <code>features</code> argument that can be a <code>logical</code>,
<code>integer</code> or <code>character</code> vector. The function returns the
<code>XCMSnExp</code> with the reduced <code>featureDefinitions</code> data frame.</p>
<p>The <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> method allows to subset a <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code>
object by spectra. Be aware that the <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> method removes all
preprocessing results, except adjusted retention times if
<code>keepAdjustedRtime = TRUE</code> is passed to the method.</p>
<p><code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code> extracts a single <code>Spectrum</code>
object from an <code>XCMSnExp</code>. The reported retention time is the
adjusted retention time if alignment has been performed on <code>x</code>.</p>
<p><code>filterMsLevel</code>: reduces the <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code>
object to spectra of the specified MS level(s). Chromatographic peaks
and identified features are also subsetted to the respective MS level. See
<code>filterMsLevel</code> documentation for details and
examples.</p>
<p>The methods listed on this page allow to filter and subset
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> objects. Most of them are inherited from the
<code>OnDiskMSnExp</code> object and have been adapted for
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> to enable subsetting also on the preprocessing
results.</p>
<p><code>filterFile</code>: allows to reduce the
<code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> to data from only certain files. Identified
chromatographic peaks for these files are retained while correspondence
results (feature definitions) are removed by default. To force keeping
feature definitions use <code>keepFeatures = TRUE</code>. Adjusted retention times
are kept by default if present. Use <code>keepAdjustedRtime = FALSE</code> to
remove them.</p>
<p><code>filterMz</code>: filters the data set based on the
provided mz value range. All chromatographic peaks and features (grouped
peaks) falling completely within the provided mz value range are retained
(if their minimal mz value is <code>&gt;= mz[1]</code> and the maximal mz value
<code>&lt;= mz[2]</code>. Adjusted retention times, if present, are not altered by
the filtering.</p>
<p><code>filterRt</code>: filters the data set based on the
provided retention time range. All chromatographic peaks and features
(grouped peaks) the specified retention time window are retained (i.e. if
the retention time corresponding to the peak's apex is within the
specified rt range). If retention time correction has been performed,
the method will by default filter the object by adjusted retention times.
The argument <code>adjusted</code> allows to specify manually whether filtering
should be performed by raw or adjusted retention times. Filtering by
retention time does not drop any preprocessing results nor does it remove
or change alignment results (i.e. adjusted retention times).
The method returns an empty object if no spectrum or feature is within
the specified retention time range.</p>
<p><code>split</code> splits an <code>XCMSnExp</code> object into a <code>list</code>
of <code>XCMSnExp</code> objects based on the provided parameter <code>f</code>.
Note that by default all pre-processing results are removed by the
splitting, except adjusted retention times, if the optional argument
<code>keepAdjustedRtime = TRUE</code> is provided.</p>
    </div>

    <pre class="usage">filterFeatureDefinitions(x, features)

# S4 method for XCMSnExp,ANY,ANY,ANY
[(x, i, j, ..., drop = TRUE)

# S4 method for XCMSnExp,ANY,ANY
[[(x, i, j, drop = FALSE)

# S4 method for XCMSnExp
filterMsLevel(object, msLevel., keepAdjustedRtime = hasAdjustedRtime(object))

# S4 method for XCMSnExp
filterFile(
  object,
  file,
  keepAdjustedRtime = hasAdjustedRtime(object),
  keepFeatures = FALSE
)

# S4 method for XCMSnExp
filterMz(object, mz, msLevel., ...)

# S4 method for XCMSnExp
filterRt(object, rt, msLevel., adjusted = hasAdjustedRtime(object))

# S4 method for XCMSnExp,ANY
split(x, f, drop = FALSE, ...)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> and <code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code>: an <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p></td>
    </tr>
    <tr>
      <th>features</th>
      <td><p>For <code>filterFeatureDefinitions</code>: either a <code>integer</code>
specifying the indices of the features (rows) to keep, a <code>logical</code>
with a length matching the number of rows of <code>featureDefinitions</code>
or a <code>character</code> with the feature (row) names.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>: <code>numeric</code> or <code>logical</code> vector specifying to
which spectra the data set should be reduced.
For <code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code>: a single integer or character.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> and <code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code>: not supported.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional additional arguments.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> and <code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code>: not supported.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>A <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p></td>
    </tr>
    <tr>
      <th>msLevel.</th>
      <td><p>For <code>filterMz</code>, <code>filterRt</code>, <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code>
defining the MS level(s) to which operations should be applied or to
which the object should be subsetted. See <code>filterMz</code>
for more details</p></td>
    </tr>
    <tr>
      <th>keepAdjustedRtime</th>
      <td><p>For <code>filterFile</code>, <code>filterMsLevel</code>,
<code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> <code>split</code>: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> defining whether the adjusted
retention times should be kept, even if e.g. features are being removed
(and the retention time correction was performed on these features).</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p>For <code>filterFile</code>: <code>integer</code> defining the file index
within the object to subset the object by file or <code>character</code>
specifying the file names to sub set. The indices are expected to be
increasingly ordered, if not they are ordered internally.</p></td>
    </tr>
    <tr>
      <th>keepFeatures</th>
      <td><p>For <code>filterFile</code>: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> whether
correspondence results (feature definitions) should be kept or dropped.
Defaults to <code>keepFeatures = FALSE</code> hence removing feature
definitions from the returned object.</p></td>
    </tr>
    <tr>
      <th>mz</th>
      <td><p>For <code>filterMz</code>: <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(2)</a></code> defining the lower and upper
mz value for the filtering.</p></td>
    </tr>
    <tr>
      <th>rt</th>
      <td><p>For <code>filterRt</code>: <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(2)</a></code> defining the retention time
window (lower and upper bound) for the filtering.</p></td>
    </tr>
    <tr>
      <th>adjusted</th>
      <td><p>For <code>filterRt</code>: <code>logical</code> indicating whether the
object should be filtered by original (<code>adjusted = FALSE</code>) or
adjusted retention times (<code>adjusted = TRUE</code>).
For <code>spectra</code>: whether the retention times in the individual
<code>Spectrum</code> objects should be the adjusted or raw retention times.</p></td>
    </tr>
    <tr>
      <th>f</th>
      <td><p>For <code>split</code> a vector of length equal to the length of x
defining how <code>x</code> will be splitted. It is converted internally to
a <code>factor</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>All methods return an <code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All subsetting methods try to ensure that the returned data is
consistent. Correspondence results for example are removed by default if the
data set is sub-setted by file, since the correspondence results are
dependent on the files on which correspondence was performed. This can be
changed by setting <code>keepFeatures = TRUE</code>.
For adjusted retention times, most subsetting methods
support the argument <code>keepAdjustedRtime</code> (even the <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> method)
that forces the adjusted retention times to be retained even if the
default would be to drop them.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The <code>filterFile</code> method removes also process history steps not
related to the files to which the object should be sub-setted and updates
the <code>fileIndex</code> attribute accordingly. Also, the method does not
allow arbitrary ordering of the files or re-ordering of the files within
the object.</p>
<p>Note also that most of the filtering methods, and also the subsetting
operations <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> drop all or selected preprocessing results. To
consolidate the alignment results, i.e. ensure that adjusted retention
times are always preserved, use the <code><a href='applyAdjustedRtime.html'>applyAdjustedRtime</a></code>
function on the object that contains the alignment results. This replaces
the raw retention times with the adjusted ones.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='XCMSnExp-class.html'>XCMSnExp</a></code> for base class documentation.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Loading a test data set with identified chromatographic peaks</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='kw'>faahko_sub</span>)
<span class='co'>## Update the path to the files for the local system</span>
<span class='fu'><a href='dirname.html'>dirname</a></span>(<span class='kw'>faahko_sub</span>) <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"cdf/KO"</span>, package = <span class='st'>"faahKO"</span>)

<span class='co'>## Subset the dataset to the first and third file.</span>
<span class='kw'>xod_sub</span> <span class='op'>&lt;-</span> <span class='fu'>filterFile</span>(<span class='kw'>faahko_sub</span>, file = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>3</span>))

<span class='co'>## The number of chromatographic peaks per file for the full object</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>faahko_sub</span>)[, <span class='st'>"sample"</span>])</div><div class='output co'>#&gt; 
#&gt;   1   2   3 
#&gt;  87 100  61 </div><div class='input'>
<span class='co'>## The number of chromatographic peaks per file for the subset</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>)[, <span class='st'>"sample"</span>])</div><div class='output co'>#&gt; 
#&gt;  1  2 
#&gt; 87 61 </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='fu'>fileNames</span>(<span class='kw'>faahko_sub</span>))</div><div class='output co'>#&gt; [1] "ko15.CDF" "ko16.CDF" "ko18.CDF"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='fu'>fileNames</span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt; [1] "ko15.CDF" "ko18.CDF"</div><div class='input'>
<span class='co'>## Filter on mz values; chromatographic peaks and features within the</span>
<span class='co'>## mz range are retained (as well as adjusted retention times).</span>
<span class='kw'>xod_sub</span> <span class='op'>&lt;-</span> <span class='fu'>filterMz</span>(<span class='kw'>faahko_sub</span>, mz = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>300</span>, <span class='fl'>400</span>))
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt;        mz mzmin mzmax       rt    rtmin    rtmax       into       intb   maxo
#&gt; CP002 302   302   302 2617.185 2595.275 2640.659   687146.6   671297.8  30552
#&gt; CP003 344   344   344 2679.783 2646.919 2709.517  5210015.9  5135916.9 152320
#&gt; CP005 366   366   366 2679.783 2642.224 2718.907  3365174.0  3279468.3  79928
#&gt; CP006 343   343   343 2678.218 2637.529 2712.647 24147443.2 23703761.7 672064
#&gt; CP007 365   365   365 2679.783 2634.399 2717.342 14975760.8 14525699.1 357632
#&gt; CP009 313   313   313 2783.070 2768.985 2806.544  1744615.5  1698756.0  74080
#&gt;        sn sample
#&gt; CP002  46      1
#&gt; CP003  68      1
#&gt; CP005  49      1
#&gt; CP006  87      1
#&gt; CP007 111      1
#&gt; CP009  44      1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 89</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>faahko_sub</span>))</div><div class='output co'>#&gt; [1] 248</div><div class='input'>
<span class='co'>## Filter on rt values. All chromatographic peaks and features within the</span>
<span class='co'>## retention time range are retained. Filtering is performed by default on</span>
<span class='co'>## adjusted retention times, if present.</span>
<span class='kw'>xod_sub</span> <span class='op'>&lt;-</span> <span class='fu'>filterRt</span>(<span class='kw'>faahko_sub</span>, rt = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2700</span>, <span class='fl'>2900</span>))

<span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span>(<span class='fu'>rtime</span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 2700.127 2898.877</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt;          mz mzmin mzmax       rt    rtmin    rtmax       into       intb   maxo
#&gt; CP008 579.1 579.1 579.1 2786.200 2765.855 2806.544  1669436.8  1642951.6  87656
#&gt; CP009 313.0 313.0 313.0 2783.070 2768.985 2806.544  1744615.5  1698756.0  74080
#&gt; CP010 301.0 301.0 301.0 2786.200 2765.855 2809.674  3051847.8  2958809.7 118512
#&gt; CP011 279.0 279.0 279.0 2787.765 2764.290 2814.369 17140627.0 16526792.4 805248
#&gt; CP012 279.1 279.1 279.1 2825.323 2820.629 2828.453   106769.4   106763.2  17760
#&gt; CP018 453.2 453.2 453.2 2720.472 2678.218 2786.200  2987076.3  2986966.8  34208
#&gt;          sn sample
#&gt; CP008    57      1
#&gt; CP009    44      1
#&gt; CP010    62      1
#&gt; CP011    45      1
#&gt; CP012 17759      1
#&gt; CP018 33983      1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>)[, <span class='st'>"rt"</span>])</div><div class='output co'>#&gt; [1] 2701.693 2895.746</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>faahko_sub</span>))</div><div class='output co'>#&gt; [1] 248</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='XCMSnExp-class.html'>chromPeaks</a></span>(<span class='kw'>xod_sub</span>))</div><div class='output co'>#&gt; [1] 21</div><div class='input'>
<span class='co'>## Extract a single Spectrum</span>
<span class='kw'>faahko_sub</span>[[<span class='fl'>4</span>]]</div><div class='output co'>#&gt; Object of class "Spectrum1"
#&gt;  Retention time: 41:46 
#&gt;  MSn level: 1 
#&gt;  Total ion count: 427 
#&gt;  Polarity: NA </div><div class='input'>
<span class='co'>## Subsetting using [ removes all preprocessing results - using</span>
<span class='co'>## keepAdjustedRtime = TRUE would keep adjusted retention times, if present.</span>
<span class='kw'>xod_sub</span> <span class='op'>&lt;-</span> <span class='kw'>faahko_sub</span>[<span class='fu'>fromFile</span>(<span class='kw'>faahko_sub</span>) <span class='op'>==</span> <span class='fl'>1</span>]</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed preprocessing results</span></div><div class='input'><span class='kw'>xod_sub</span></div><div class='output co'>#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Mon Jun 15 06:30:44 2020] 
#&gt;  MSnbase version: 2.15.2 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko15.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko15.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F1.S0001 F1.S0002 ... F1.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -</div><div class='input'>
<span class='co'>## Using split does also remove preprocessing results, but it supports the</span>
<span class='co'>## optional parameter keepAdjustedRtime.</span>
<span class='co'>## Split the object into a list of XCMSnExp objects, one per file</span>
<span class='kw'>xod_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span>(<span class='kw'>faahko_sub</span>, f = <span class='fu'>fromFile</span>(<span class='kw'>faahko_sub</span>))
<span class='kw'>xod_list</span></div><div class='output co'>#&gt; $`1`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Mon Jun 15 06:30:44 2020] 
#&gt;  MSnbase version: 2.15.2 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko15.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko15.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F1.S0001 F1.S0002 ... F1.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; 
#&gt; $`2`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Mon Jun 15 06:30:44 2020] 
#&gt;  MSnbase version: 2.15.2 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko16.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko16.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F2.S0001 F2.S0002 ... F2.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; 
#&gt; $`3`
#&gt; MSn experiment data ("XCMSnExp")
#&gt; Object size in memory: 0.48 Mb
#&gt; - - - Spectra data - - -
#&gt;  MS level(s): 1 
#&gt;  Number of spectra: 1278 
#&gt;  MSn retention times: 41:41 - 74:60 minutes
#&gt; - - - Processing information - - -
#&gt; Data loaded [Mon Jun 15 06:30:44 2020] 
#&gt;  MSnbase version: 2.15.2 
#&gt; - - - Meta data  - - -
#&gt; phenoData
#&gt;   rowNames: ko18.CDF
#&gt;   varLabels: sampleNames
#&gt;   varMetadata: labelDescription
#&gt; Loaded from:
#&gt;   ko18.CDF 
#&gt; protocolData: none
#&gt; featureData
#&gt;   featureNames: F3.S0001 F3.S0002 ... F3.S1278 (1278 total)
#&gt;   fvarLabels: fileIdx spIdx ... spectrum (33 total)
#&gt;   fvarMetadata: labelDescription
#&gt; experimentData: use 'experimentData(object)'
#&gt; - - - xcms preprocessing - - -
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffen Neumann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


